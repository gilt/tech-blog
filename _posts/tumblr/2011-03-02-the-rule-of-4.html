---
redirect_to:
- http://tech.hbc.com/2011-03-02-the-rule-of-4.html
layout:: post
title: The Rule of 4
date: '2011-03-02T12:05:00-05:00'
tags:
- Rule of 4
- gilt
- gilttech
- technology
- Michael Bryzek
- submission
tumblr_url: http://tech.gilt.com/post/3602223635/the-rule-of-4
---
<p>At Gilt, we&rsquo;ve stumbled into something we internally call the Rule of 4:<br/><br/>Q: How many servers should we have for this new app?<br/>A: 4<br/><br/>Q: How many partitions should we split our inventory into?<br/>A: 4<br/><br/>Q: How many nodes should the cart KV store run on?<br/>A: 4<br/><br/>Why 4?<br/><br/>One is not a good idea - building for 1 makes it hard to expand later (e.g. imagine building a service that runs on a single node&hellip; it usually takes a lot of work later to modify the service to run on 2 nodes).<br/><br/>Two is better, but still leads to assumptions designed into the code as opposed to configuration.<br/><br/>Three generally works well. By the time an application is built to run on 3 nodes, the node information usually has moved to configuration and services that run on 3 nodes tend to be easy to expand.<br/><br/>So why 4? Our early systems were provisioned in groups of 4 based on load estimates&hellip; and worked great. We found that 4 servers was enough for many of the applications / servers we create at Gilt (not every application gets hammered at noon). With four servers, we can safely ramp up traffic for new applications, get real world metrics on performance based on a percentage of site traffic, and then decide how many actual servers we will need to support the full traffic of the site.</p>
